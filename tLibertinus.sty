%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% A package designed to implement my favourite font setup for use
% with Libertinus for body and math.
%
% Version: 0.1 - Nov 2016.
%          0.2 - March 2018.
%
% Author: Timothy A.V. Teatro <timothy.teatro@uoit.net>
%
%
%
%%% Font selection and related definitions
%====================================================================


\usepackage{pgfornament}
\usepackage{fontspec}
\ifluatex\usepackage{lualatex-math}\fi
\defaultfontfeatures{RawFeature=+calt}
\setmainfont{LibertinusSerif-Regular.otf}[
    Path = {/home/timtro/.fonts/type1/Libertinus/}
  , ItalicFont = LibertinusSerif-Italic.otf
  , BoldFont = LibertinusSerif-Semibold.otf
  , BoldItalicFont = LibertinusSerif-BoldItalic.otf
  , StylisticSet={5} ]
\setsansfont{LibertinusSans-Regular.otf}[
    Path = {/home/timtro/.fonts/type1/Libertinus/}
  , ItalicFont = LibertinusSans-Italic.otf
  , BoldFont = LibertinusSans-Bold.otf ]
\setmonofont{Hasklig}[
    Scale = MatchLowercase
  , BoldFont = *-Semibold
  , ItalicFont = *-It
  , BoldItalicFont = *-SemiboldIt ]

\newfontfamily{\textdf}[
  Path = {/home/timtro/.fonts/type1/Libertinus/}
    ]{LibertinusSerifDisplay-Regular.otf}

\newfontfamily{\textsb}[
  Path = {/home/timtro/.fonts/type1/Libertinus/}
    ]{LibertinusSerif-Semibold.otf}

\newfontfamily{\textsbit}[
  Path = {/home/timtro/.fonts/type1/Libertinus/}
    ]{LibertinusSerif-SemiboldItalic.otf}

\usepackage[math-style=ISO, partial=upright]{unicode-math}
\setmathfont[
  Path = {/home/timtro/.fonts/type1/Libertinus/},
  AutoFakeBold
 ]{LibertinusMath-Regular.otf}

\ifluatex
  \mathoption old 1 % Fixes italic correction!
  \mathitalicsmode=1
  % \mathdelimitersmode=7
\fi

\usepackage{lettrine}
\newfontfamily{\infamily}{Roboto Condensed Bold}[Scale=MatchUppercase]
\renewcommand*{\DefaultLoversize}{0.1}
\renewcommand{\LettrineFontHook}{\infamily}
\renewcommand{\LettrineTextFont}{\sffamily\MakeTextUppercase}

\makeatletter
\newcommand{\asterismFrame}[1]{\par\bigskip\noindent\hfill #1 \hfill\null\par\bigskip\@afterindentfalse\@afterheading}
\newcommand{\linearAsterism}{\asterismFrame{$*\quad*\quad*$}}
\newcommand{\bouquetAsterism}{\asterismFrame{%
    \begin{tikzpicture}
      \node[anchor=centre, rotate=120]{\pgfornament[width=.5cm]{9}}
    \end{tikzpicture}
  }
}
\makeatother
\newcommand{\fleurAsterism}{\asterismFrame{\adfflowerright}}
\newcommand{\sAsterism}{\asterismFrame{\adfopenflourishleft}}
\newcommand{\ssAsterism}{\asterismFrame{\adfdoubleflourishleft}}
\newcommand{\sssAsterism}{\asterismFrame{\adftripleflourishleft}}
\newcommand{\sickleAsterism}{\asterismFrame{\adfsickleflourishleft}}
